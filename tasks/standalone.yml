---
- name: Copy redis.service file to redis server
  template:
    src: redis.service.j2
    dest: "/etc/systemd/system/redis.service"
    owner: root
    group: root
  notify:
    - Reload systemd daemon

- name: Copy redis.conf to redis server
  template:
    src: redis.conf.j2
    dest: "{{ redis_conf_file_location }}/redis.conf"
    owner: redis
    group: redis
  notify:
    - Start Redis Service

- name: Create redis check command without passsword
  set_fact:
    redis_check_command: redis-cli cluster
  when: redis_password is not defined

- name: Create redis check command with password
  set_fact:
    redis_check_command: "redis-cli -a {{ redis_password }}"
  when: redis_password is defined
